- 2025-10-11: Confirmed Task 1 (“Create AGENTS.md”) is complete; verification lives in docs/AGENTS.md.
- 2025-10-11: Created CLAUDE.md symlink to docs/AGENTS.md (AI agent bootstrap). Verified via `readlink`.
- 2025-10-11: Homebrew verified (4.6.15) and updated taps successfully; outdated formulae listed.
- 2025-10-11: Node verified (v24.9.0) and npm (11.6.0) OK; meets >= 18 requirement.
- 2025-10-11: Python verified (3.13.7) and functional (`python3 -c 'print("OK")'`).
- 2025-10-11: Added root .gitignore for Node/OS/editor/Python; confirmed VCS setup and remote.
- 2025-10-11: Refactored Project Scaffolding to Next.js monolith in Tasks.md.
- 2025-10-11: Scaffolded Next.js project files (package.json, tsconfig, next.config, postcss).
- 2025-10-11: Added Prisma schema (prisma/schema.prisma) per docs/Database.md.
- 2025-10-11: Implemented temporary Next API routes backed by fixtures; added SSE stub for POST /api/messages.
- 2025-10-11: Added .env.example per docs/ENV.md; added simple app/page.tsx matching selectors.
- 2025-10-11: Added Playwright config and minimal E2E spec (shell, threads, model switcher, send flow).
- 2025-10-11: Completed Task 1 (Setup local PostgreSQL using Docker): container healthy, Prisma schema applied via `prisma db push`.
- 2025-10-12: Updated AGENTS.md to include checking task boxes in the same commit; marked Task 1 checkbox.
- 2025-10-12: Completed Task 2 (Extend Prisma schema for NextAuth): added Account/Session/VerificationToken models; migration applied.
- 2025-10-12: Completed Task 3 (Configure NextAuth with Google provider): added App Router handler, auth helper, and Prisma client singleton.
- 2025-10-12: Completed Task 4 (Create protected route with user display): header auth controls and server-side redirect implemented.
- 2025-10-12: Completed Task 5 (Auth middleware for API routes): added requireUser guard and standardized error envelope.
- 2025-10-12: Completed Task 6 (Threads API database integration): GET/POST now backed by Prisma with Zod validation.
- 2025-10-12: Completed Task 7 (Messages API with database persistence): GET queries DB, POST persists user message (SSE stub retained).
- 2025-10-12: Completed Task 8 (OpenAI adapter non-streaming): provider interface + OpenAI adapter; POST /api/messages supports ?mode=json for validation.
- 2025-10-12: Completed Task 9 (Database seeding): added prisma/seed.ts, seed script, and verified seed in Docker Postgres.
- 2025-10-12: Completed Task 10 (SSE streaming for OpenAI): messages route now streams using adapter and persists assistant response; standardized error helper.
- 2025-10-12: Completed Task 12 (Anthropic adapter implementation): adapter modules added and provider registry extended.
- 2025-10-12: Completed Task 13 (Provider routing and model switcher UI): DB-backed PATCH and header model display.
- 2025-10-12: Completed Task 14 (Mid-conversation model switching): full history sent to adapters; messages annotated with provider/model.
- 2025-10-12: Completed Task 15 (Context window truncation): truncation utility + unit test (Vitest).
- 2025-10-12: Completed Task 16 (Enhanced UI error/loading): keyboard shortcuts updated; UI states verified.
- 2025-10-12: Completed Task 17 (Mobile responsive layout): overlay thread tray confirmed on mobile.
- 2025-10-12: Completed Task 18 (Integration testing suite): added Vitest integration tests for threads and messages; Docker DB used.
- 2025-10-12: Planning & Audit: added “Next Tasks — Demo MVP Track (Revised)” and gated POST /api/messages?mode=json to test-only (400 in dev/prod).
- 2025-10-13: API docs updated to note `?mode=json` is test-only; SSE error events standardized to `{ error: { code, message, details } }`.
- 2025-10-13: Anthropic streaming verified end-to-end. With no ANTHROPIC_API_KEY set, deterministic stub stream emits three chunks and `done`; with a real key, adapter streams deltas and persists assistant on completion. Error events use standard envelope.
- 2025-10-13: Vercel production deployment created via CLI; domain added; DNS A record configured. Postinstall runs `prisma generate` for fresh Prisma client. R5.1 completed.
- 2025-10-14: R4.1 Auth guard coverage added (integration tests for 401/403/404 across /api/threads, /api/messages, /api/threads/:id). All tests passing.
- 2025-10-14: R4.2 Streaming envelope sanity added (SSE emits delta/done; error path emits error envelope). Providers refactored to lazy-init SDK clients when API keys exist; deterministic stubs when keys are absent.
- 2025-10-14: E2E: Added mobile overlay test; full E2E suite green with mocked auth/provider.
- 2025-10-14: R5.2 Domain + Google OAuth redirects verified — https://bombay.chat live over HTTPS, sign-in works (user-confirmed). Note: Chrome Safe Browsing may briefly warn on a brand-new domain; expected to clear after reputation warms up or via review.
- 2025-10-14: Production deployment checklist confirmed: API keys present (OpenAI, Anthropic), environment variables configured for Production/Preview, Vercel project linked, custom domain configured, and production database operational (user-confirmed).
